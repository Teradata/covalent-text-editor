{"version":3,"file":"covalent-text-editor.umd.js","sources":["../../../../src/platform/text-editor/text-editor.component.ts","../../../../src/platform/text-editor/text-editor.module.ts"],"sourcesContent":["import { Component, Input, AfterViewInit, ViewChild, ElementRef, forwardRef, NgZone } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport * as EasyMDE from 'easymde';\n// get access to the marked class under easymde\nimport * as marked from 'marked';\n\nconst noop: any = () => {\n  // empty method\n};\n\n@Component({\n  selector: 'td-text-editor',\n  templateUrl: './text-editor.component.html',\n  styleUrls: ['./text-editor.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => TdTextEditorComponent),\n      multi: true,\n    },\n  ],\n})\nexport class TdTextEditorComponent implements AfterViewInit, ControlValueAccessor {\n  private _value: string = '';\n  private _easyMDE: any;\n  private _fromEditor: boolean = false;\n\n  @ViewChild('easymde', { static: true }) textarea: ElementRef;\n  @Input() options: any = {};\n\n  constructor(private _zone: NgZone) {}\n\n  /* tslint:disable-next-line */\n  propagateChange = (_: any) => {};\n  onTouched = () => noop;\n\n  /**\n   * value?: string\n   * Value in the Editor after async getEditorContent was called\n   */\n  @Input('value')\n  set value(value: string) {\n    this._value = value;\n    if (this._easyMDE) {\n      if (!this._fromEditor) {\n        this._easyMDE.value(value);\n      }\n      this.propagateChange(this._value);\n      this._fromEditor = false;\n      this._zone.run(() => (this._value = value));\n    }\n  }\n\n  get value(): string {\n    return this._value;\n  }\n\n  get easyMDE(): any {\n    return this._easyMDE;\n  }\n\n  /**\n   * Implemented as part of ControlValueAccessor.\n   */\n  writeValue(value: any): void {\n    this.value = !value ? '' : value;\n  }\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  ngAfterViewInit(): void {\n    this.options.element = this.textarea.nativeElement;\n\n    // If content entered is html then don't evaluate it, prevent xss vulnerabilities\n    marked.setOptions({ sanitize: true });\n    this._easyMDE = new EasyMDE(this.options);\n    this._easyMDE.value(this.value);\n    this._easyMDE.codemirror.on('change', () => {\n      this._fromEditor = true;\n      this.writeValue(this._easyMDE.value());\n    });\n  }\n\n  /* Wrapped function provided by EasyMDE */\n\n  isPreviewActive(): boolean {\n    return this._easyMDE.isPreviewActive();\n  }\n\n  isSideBySideActive(): boolean {\n    return this._easyMDE.isSideBySideActive();\n  }\n\n  isFullscreenActive(): boolean {\n    return this._easyMDE.isFullscreenActive();\n  }\n\n  clearAutosavedValue(): void {\n    this._easyMDE.clearAutosavedValue();\n  }\n\n  toTextArea(): void {\n    this._easyMDE.toTextArea();\n  }\n\n  toggleBold(): void {\n    this._easyMDE.toggleBold();\n  }\n\n  toggleItalic(): void {\n    this._easyMDE.toggleItalic();\n  }\n\n  toggleStrikethrough(): void {\n    this._easyMDE.toggleStrikethrough();\n  }\n\n  toggleHeadingSmaller(): void {\n    this._easyMDE.toggleHeadingSmaller();\n  }\n\n  toggleHeadingBigger(): void {\n    this._easyMDE.toggleHeadingBigger();\n  }\n\n  toggleHeading1(): void {\n    this._easyMDE.toggleHeading1();\n  }\n\n  toggleHeading2(): void {\n    this._easyMDE.toggleHeading2();\n  }\n\n  toggleHeading3(): void {\n    this._easyMDE.toggleHeading3();\n  }\n\n  toggleCodeBlock(): void {\n    this._easyMDE.toggleCodeBlock();\n  }\n\n  toggleBlockquote(): void {\n    this._easyMDE.toggleBlockquote();\n  }\n\n  toggleUnorderedList(): void {\n    this._easyMDE.toggleUnorderedList();\n  }\n\n  toggleOrderedList(): void {\n    this._easyMDE.toggleOrderedList();\n  }\n\n  cleanBlock(): void {\n    this._easyMDE.cleanBlock();\n  }\n\n  drawLink(): void {\n    this._easyMDE.drawLink();\n  }\n\n  drawImage(): void {\n    this._easyMDE.drawImage();\n  }\n\n  drawTable(): void {\n    this._easyMDE.drawTable();\n  }\n\n  drawHorizontalRule(): void {\n    this._easyMDE.drawHorizontalRule();\n  }\n\n  togglePreview(): void {\n    this._easyMDE.togglePreview();\n  }\n\n  toggleSideBySide(): void {\n    this._easyMDE.toggleSideBySide();\n  }\n\n  toggleFullScreen(): void {\n    this._easyMDE.toggleFullScreen();\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { CommonModule } from '@angular/common';\n\nimport { TdTextEditorComponent } from './text-editor.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [TdTextEditorComponent],\n  exports: [TdTextEditorComponent],\n  bootstrap: [TdTextEditorComponent],\n})\nexport class CovalentTextEditorModule {}\n"],"names":["marked.setOptions","EasyMDE","Component","NG_VALUE_ACCESSOR","forwardRef","NgZone","ViewChild","Input","NgModule","CommonModule"],"mappings":"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"}